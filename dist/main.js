(()=>{"use strict";var e,t,n,r,a={954:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});const r={create:function(e,t){e||console.log("missing type");const n=document.createElement(e);for(const[e,r]of Object.entries(t))n[e]=r;return n},appendAll:function(e,t){t.forEach((t=>e.appendChild(t)))},deleteAppContent:function(){document.getElementById("app").replaceChildren("")},getHeader:function(e){const t=document.createElement("header");t.classList.add("header",`${e}`);const n=document.createElement("h1");return n.textContent="Battleship",t.appendChild(n),t},createMap:function(e){const t=document.createElement("div");t.id=`board-${e}`,t.classList.add("board",e);const n=document.createElement("div");return n.className="board-corner",t.appendChild(n),t.appendChild(function(){const e=document.createElement("div");return e.classList="letter-container",["A","B","C","D","E","F","G","H","I","J"].forEach((t=>{const n=document.createElement("div");n.className="letter",n.textContent=t,e.appendChild(n)})),e}()),t.appendChild(function(){const e=document.createElement("div");return e.id="number-container",e.classList="number-container",[1,2,3,4,5,6,7,8,9,10].forEach((t=>{const n=document.createElement("div");n.classList="number",n.textContent=t,e.appendChild(n)})),e}()),t.appendChild(function(e){const t=document.createElement("div");t.id=`field-container-${e}`,t.className="field-container";for(let e=0;e<10;e+=1)for(let n=0;n<10;n+=1){const r=document.createElement("div");r.className="field",r.dataset.row=e,r.dataset.col=n,t.appendChild(r)}return t}(e)),t},getCoordinatesFromIndex:function(e){return[parseInt(e/10,10),e%10]},getIndexFromCoordinates:function(e,t){return 10*e+t},roundNearestTenExceptZero:function(e){for(;e%10!=0;)e+=1;return e}},a=36,s={Carrier:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull --\x3e\n            <rect x="2" y="4" width="${e-4}" height="${t-8}" rx="6" ry="6" fill="#4a4a4a" stroke="#333" stroke-width="1.5"/>\n            \x3c!-- Flight deck --\x3e\n            <rect x="6" y="8" width="${e-12}" height="${t-16}" rx="3" fill="#5a5a5a"/>\n            \x3c!-- Deck lines --\x3e\n            <line x1="12" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#777" stroke-width="0.8" stroke-dasharray="4,3"/>\n            <line x1="12" y1="${t/2-5}" x2="${e-12}" y2="${t/2-5}" stroke="#666" stroke-width="0.5" stroke-dasharray="3,4"/>\n            <line x1="12" y1="${t/2+5}" x2="${e-12}" y2="${t/2+5}" stroke="#666" stroke-width="0.5" stroke-dasharray="3,4"/>\n            \x3c!-- Island (control tower) --\x3e\n            <rect x="${e-50}" y="6" width="16" height="10" rx="2" fill="#3a3a3a" stroke="#222" stroke-width="1"/>\n            <rect x="${e-48}" y="3" width="4" height="3" rx="1" fill="#333"/>\n            \x3c!-- Bow arrow --\x3e\n            <polygon points="${e-8},${t/2} ${e-16},${t/2-4} ${e-16},${t/2+4}" fill="#666"/>\n            \x3c!-- Aircraft silhouettes on deck --\x3e\n            <g fill="#6a6a6a" opacity="0.6">\n                <rect x="14" y="${t/2-6}" width="10" height="4" rx="1"/>\n                <rect x="30" y="${t/2+2}" width="10" height="4" rx="1"/>\n                <rect x="50" y="${t/2-6}" width="10" height="4" rx="1"/>\n                <rect x="70" y="${t/2+2}" width="10" height="4" rx="1"/>\n            </g>\n        </svg>`,Battleship:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull --\x3e\n            <path d="M 8,${t/2} Q 2,${t/2} 4,${t/2-8} L 10,${t/2-10} L ${e-10},${t/2-10} Q ${e-2},${t/2-8} ${e-2},${t/2} Q ${e-2},${t/2+8} ${e-10},${t/2+10} L 10,${t/2+10} Q 2,${t/2+8} 4,${t/2+8} Z" fill="#5a6a7a" stroke="#3a4a5a" stroke-width="1.5"/>\n            \x3c!-- Superstructure --\x3e\n            <rect x="${e/2-18}" y="${t/2-7}" width="36" height="14" rx="3" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            \x3c!-- Bridge --\x3e\n            <rect x="${e/2-8}" y="${t/2-9}" width="16" height="18" rx="2" fill="#3a4a5a"/>\n            \x3c!-- Forward turrets --\x3e\n            <circle cx="24" cy="${t/2}" r="6" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="24" y1="${t/2}" x2="12" y2="${t/2}" stroke="#3a4a5a" stroke-width="2.5" stroke-linecap="round"/>\n            <circle cx="${e/2-26}" cy="${t/2}" r="5" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="${e/2-26}" y1="${t/2}" x2="${e/2-38}" y2="${t/2}" stroke="#3a4a5a" stroke-width="2" stroke-linecap="round"/>\n            \x3c!-- Aft turrets --\x3e\n            <circle cx="${e-24}" cy="${t/2}" r="6" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="${e-24}" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#3a4a5a" stroke-width="2.5" stroke-linecap="round"/>\n            \x3c!-- Bow --\x3e\n            <polygon points="4,${t/2} 10,${t/2-6} 10,${t/2+6}" fill="#5a6a7a" stroke="#3a4a5a" stroke-width="0.5"/>\n        </svg>`,Destroyer:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - sleek --\x3e\n            <path d="M 4,${t/2} L 10,${t/2-8} L ${e-8},${t/2-8} Q ${e-2},${t/2-4} ${e-2},${t/2} Q ${e-2},${t/2+4} ${e-8},${t/2+8} L 10,${t/2+8} Z" fill="#5a6b4a" stroke="#3a4b2a" stroke-width="1.5"/>\n            \x3c!-- Superstructure --\x3e\n            <rect x="${e/2-12}" y="${t/2-5}" width="24" height="10" rx="2" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            \x3c!-- Forward turret --\x3e\n            <circle cx="22" cy="${t/2}" r="5" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            <line x1="22" y1="${t/2}" x2="10" y2="${t/2}" stroke="#3a4b2a" stroke-width="2" stroke-linecap="round"/>\n            \x3c!-- Aft turret --\x3e\n            <circle cx="${e-22}" cy="${t/2}" r="4" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            <line x1="${e-22}" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#3a4b2a" stroke-width="1.5" stroke-linecap="round"/>\n            \x3c!-- Bow point --\x3e\n            <polygon points="4,${t/2} 10,${t/2-5} 10,${t/2+5}" fill="#5a6b4a"/>\n        </svg>`,Submarine:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - rounded --\x3e\n            <ellipse cx="${e/2}" cy="${t/2}" rx="${e/2-3}" ry="${t/2-6}" fill="#2a2a2a" stroke="#1a1a1a" stroke-width="1.5"/>\n            \x3c!-- Conning tower --\x3e\n            <rect x="${e/2-10}" y="${t/2-8}" width="20" height="16" rx="4" fill="#333" stroke="#1a1a1a" stroke-width="1"/>\n            \x3c!-- Periscope --\x3e\n            <line x1="${e/2+4}" y1="${t/2-8}" x2="${e/2+4}" y2="${t/2-14}" stroke="#444" stroke-width="2" stroke-linecap="round"/>\n            <circle cx="${e/2+4}" cy="${t/2-15}" r="2" fill="#555" stroke="#333" stroke-width="0.5"/>\n            \x3c!-- Bow --\x3e\n            <ellipse cx="8" cy="${t/2}" rx="5" ry="${t/2-8}" fill="#252525"/>\n            \x3c!-- Stern planes --\x3e\n            <line x1="${e-8}" y1="${t/2-10}" x2="${e-8}" y2="${t/2+10}" stroke="#333" stroke-width="2"/>\n            \x3c!-- Propeller hint --\x3e\n            <circle cx="${e-5}" cy="${t/2}" r="3" fill="none" stroke="#444" stroke-width="1"/>\n            \x3c!-- Hull details --\x3e\n            <line x1="18" y1="${t/2}" x2="${e/2-12}" y2="${t/2}" stroke="#333" stroke-width="0.8"/>\n            <line x1="${e/2+12}" y1="${t/2}" x2="${e-18}" y2="${t/2}" stroke="#333" stroke-width="0.8"/>\n        </svg>`,PatrolBoat:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - small and fast --\x3e\n            <path d="M 4,${t/2} L 8,${t/2-7} L ${e-6},${t/2-7} Q ${e-2},${t/2-3} ${e-2},${t/2} Q ${e-2},${t/2+3} ${e-6},${t/2+7} L 8,${t/2+7} Z" fill="#d4cfc4" stroke="#aaa48e" stroke-width="1.5"/>\n            \x3c!-- Cabin --\x3e\n            <rect x="${e/2-8}" y="${t/2-5}" width="16" height="10" rx="2" fill="#c4bfb4" stroke="#aaa48e" stroke-width="1"/>\n            \x3c!-- Small gun --\x3e\n            <circle cx="16" cy="${t/2}" r="3" fill="#b4afa4" stroke="#aaa48e" stroke-width="0.8"/>\n            <line x1="16" y1="${t/2}" x2="8" y2="${t/2}" stroke="#aaa48e" stroke-width="1.5" stroke-linecap="round"/>\n            \x3c!-- Bow --\x3e\n            <polygon points="4,${t/2} 8,${t/2-4} 8,${t/2+4}" fill="#d4cfc4"/>\n            \x3c!-- Wake lines --\x3e\n            <line x1="${e-4}" y1="${t/2-4}" x2="${e+2}" y2="${t/2-6}" stroke="#aaa48e" stroke-width="0.5" opacity="0.5"/>\n            <line x1="${e-4}" y1="${t/2+4}" x2="${e+2}" y2="${t/2+6}" stroke="#aaa48e" stroke-width="0.5" opacity="0.5"/>\n        </svg>`};function i(e,t,n){const r=s[e];return r?r(t*a,36):""}let o=null;function l(){return o||(o=new(window.AudioContext||window.webkitAudioContext)),o}function c(){const e=l(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(440,e.currentTime),t.frequency.exponentialRampToValueAtTime(880,e.currentTime+.1),n.gain.setValueAtTime(.15,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15)}function d(e){e.then((e=>{const t=new Audio(e.default);t.volume=.5,t.play()}))}function u(){d(n.e(392).then(n.t.bind(n,392,17)))}const h=[{name:"Carrier",size:5},{name:"Battleship",size:4},{name:"Destroyer",size:3},{name:"Submarine",size:3},{name:"PatrolBoat",displayName:"Patrol Boat",size:2}];function p(e){const t=document.createElement("div");t.className="score-panel";const n=document.createElement("h3");n.className="score-panel-title",n.textContent=e,t.appendChild(n);const r=document.createElement("ul");return r.className="score-panel-list",h.forEach((e=>{const t=document.createElement("li");t.className="score-ship",t.dataset.shipName=e.name;const n=document.createElement("span");n.className="score-ship-name",n.textContent=e.displayName||e.name,t.appendChild(n);const a=document.createElement("span");a.className="score-ship-squares";for(let t=0;t<e.size;t++){const e=document.createElement("span");e.className="score-square",e.dataset.index=t,a.appendChild(e)}t.appendChild(a);const s=document.createElement("span");s.className="score-ship-status",t.appendChild(s),r.appendChild(t)})),t.appendChild(r),t}let m=null,f=!1;function y(e,t,n,r,s,o){const l=document.createElement("div");l.className="ship-overlay battle-ship-overlay",l.dataset.shipName=t;const c="X"===o?n:1,d="Y"===o?n:1;l.style.left=s*a+"px",l.style.top=r*a+"px",l.style.width=c*a+"px",l.style.height=d*a+"px";const u=document.createElement("div");u.className="ship-overlay-svg","Y"===o&&(u.classList.add("rotated"),u.style.width=n*a+"px",u.style.height="36px"),u.innerHTML=i(t,n),l.appendChild(u),e.appendChild(l)}function g(e){const t=document.getElementById(e);if(!t)return;const n=document.createElement("div");n.className="radar-sweep",t.appendChild(n)}function x(e){const t=e.target.closest(".field");if(!t||f)return;if("battle"!==m.phase||"player"!==m.game.currentTurn)return;const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10);if(m.game.player.alreadyHit(n,r))return;u();const a=m.playerAttack(n,r);a&&"already"!==a.result&&setTimeout((()=>{if(w(t,a),$(a),function(e){if(!e||"hit"!==e.result||!e.sunk)return;const t=document.querySelector("#content-right .score-panel");if(!t)return;const n=e.ship,r=t.querySelector(`[data-ship-name="${n.name}"]`);if(!r)return;const a=r.querySelectorAll(".score-square"),s=r.querySelector(".score-ship-status");r.classList.add("score-sunk"),a.forEach((e=>e.classList.add("score-square-hit"))),s.textContent="âœ—"}(a),"hit"===a.result&&a.sunk){const e=m.getSunkShipPositions(m.game.computerBoard).find((e=>e.name===a.ship.name));e&&function(e){const t=document.getElementById("field-container-computer");t&&(t.querySelector(`.ship-overlay[data-ship-name="${e.name}"]`)||y(t,e.name,e.size,e.row,e.col,e.orientation))}(e)}const e=m.checkGameOver();if(e)return E("player"===e?"Victory! You sank the entire enemy fleet!":"Defeat! Your fleet has been sunk!"),void C(e);"hit"===a.result&&a.sunk?E(`You sank their ${a.ship.name}!`):"hit"===a.result?E("Hit!"):E("Miss..."),f=!0,setTimeout((()=>{u(),setTimeout((()=>{const e=m.computerTurn();if(!e)return void(f=!1);const t=document.getElementById("field-container-player");if(!t)return;const n=t.querySelector(`.field[data-row="${e.row}"][data-col="${e.col}"]`);n&&w(n,e),$(e),function(e){const t=document.querySelector("#content-left .score-panel");t&&e.fleet.forEach((e=>{const n=t.querySelector(`[data-ship-name="${e.name}"]`);if(!n)return;const r=n.querySelectorAll(".score-square"),a=n.querySelector(".score-ship-status");e.isSunk()?(n.classList.add("score-sunk"),n.classList.remove("score-damaged"),r.forEach((e=>e.classList.add("score-square-hit"))),a.textContent="âœ—"):e.hits>0&&(n.classList.add("score-damaged"),r.forEach(((t,n)=>{n<e.hits?t.classList.add("score-square-hit"):t.classList.remove("score-square-hit")})),a.textContent="")}))}(m.game.playerBoard);const r=m.checkGameOver();if(r)return E("player"===r?"Victory! You sank the entire enemy fleet!":"Defeat! Your fleet has been sunk!"),void C(r);"hit"===e.result&&e.sunk?E(`Enemy sank your ${e.ship.name}! Your turn.`):"hit"===e.result?E("Enemy hit your ship! Your turn."):E("Enemy missed. Your turn!")}),150),f=!1}),500)}),150)}function $(e){"hit"===e.result&&e.sunk?d(n.e(554).then(n.t.bind(n,554,17))):"hit"===e.result?d(n.e(704).then(n.t.bind(n,704,17))):d(n.e(850).then(n.t.bind(n,850,17)))}function w(e,t){"hit"===t.result?e.classList.add("cell-hit"):e.classList.add("cell-miss")}let v=null,k=null,b=null;function E(e){v&&clearInterval(v),k&&clearTimeout(k);const t=function(){let e=document.querySelector(".typewriter-zone");return e||(e=document.createElement("div"),e.className="typewriter-zone",document.body.appendChild(e)),e}();b&&b.remove();const n=document.createElement("div");n.className="typewriter-msg",n.textContent="",t.appendChild(n),b=n;let r=0;v=setInterval((()=>{n.textContent+=e[r],r++,r>=e.length&&(clearInterval(v),v=null,k=setTimeout((()=>{n.classList.add("fadeout"),k=setTimeout((()=>{n.remove(),b===n&&(b=null)}),600)}),2e3))}),40)}function C(e){f=!0,document.querySelectorAll(".radar-sweep").forEach((e=>{e.classList.add("radar-stopped")}));const t=document.createElement("div");t.className="gameover-overlay";const r=document.createElement("div");r.className="gameover-box";const a=document.createElement("h2");a.className="gameover-title",a.textContent="player"===e?"Victory!":"Defeat!";const s=document.createElement("p");s.className="gameover-subtitle",s.textContent="player"===e?"You destroyed the entire enemy fleet.":"Your fleet has been destroyed.";const i=document.createElement("button");i.className="setup-btn",i.textContent="Play Again",i.addEventListener("click",(async()=>{t.remove(),m.resetGame(),f=!1,document.getElementById("content-right").innerHTML="",(await Promise.resolve().then(n.bind(n,954))).default.init(m)})),r.appendChild(a),r.appendChild(s),r.appendChild(i),t.appendChild(r),document.body.appendChild(t)}const S=function(e){m=e,function(){const e=document.getElementById("content-left");e.innerHTML="";const t=document.createElement("div");t.className="battle-section";const n=document.createElement("h2");n.className="board-title",n.textContent="Your Fleet",t.appendChild(n);const a=r.createMap("player");t.appendChild(a),t.appendChild(p("Your Fleet")),E("Your turn â€” fire at the enemy grid!"),e.appendChild(t),function(){const e=document.getElementById("field-container-player");e&&m.game.playerBoard.placements.forEach((t=>{y(e,t.ship.name,t.ship.size,t.row,t.column,t.orientation)}))}(),g("field-container-player");const s=document.getElementById("content-right");s.innerHTML="";const i=document.createElement("div");i.className="battle-section";const o=document.createElement("h2");o.className="board-title",o.textContent="Enemy Waters",i.appendChild(o);const l=r.createMap("computer");i.appendChild(l),i.appendChild(p("Enemy Fleet")),s.appendChild(i),g("field-container-computer"),function(){const e=document.getElementById("field-container-computer");e&&e.addEventListener("click",x)}()}()};let T=null,B=null;function N(e){const t=e.currentTarget;B={name:t.dataset.shipName,size:parseInt(t.dataset.shipSize,10)},t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.dataset.shipName);const n=t.querySelector("svg");if(n){const t=n.cloneNode(!0);t.style.opacity="0.8";const r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.appendChild(t),document.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0),setTimeout((()=>r.remove()),0)}}function L(e){e.currentTarget.classList.remove("dragging"),B=null,I()}function P(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const t=e.target.closest(".field");if(!t||!B)return;I();const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10),{name:a,size:s}=B,i=T.orientation,o=T.game.playerBoard.isPlacementPossible({size:s},n,r,i),l=A(n,r,s,i),c=o?"preview-valid":"preview-invalid";l.forEach((e=>{e&&e.classList.add(c)}))}function M(e){const t=document.getElementById("field-container-player");t&&!t.contains(e.relatedTarget)&&I()}function z(e){e.preventDefault(),I();const t=e.target.closest(".field");if(!t||!B)return;const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10),{name:a,size:s}=B,i=T.orientation;T.placePlayerShip({name:a,size:s},n,r,i)?(c(),q(a,s,n,r,i),H(a),O()):function(){const e=l(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="square",t.frequency.setValueAtTime(150,e.currentTime),t.frequency.exponentialRampToValueAtTime(80,e.currentTime+.2),n.gain.setValueAtTime(.12,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.25),t.start(e.currentTime),t.stop(e.currentTime+.25)}(),B=null}function A(e,t,n,r){const a=document.getElementById("field-container-player");if(!a)return[];const s=[];for(let i=0;i<n;i++){const n="Y"===r?e+i:e,o="X"===r?t+i:t,l=a.querySelector(`.field[data-row="${n}"][data-col="${o}"]`);s.push(l)}return s}function I(){const e=document.getElementById("field-container-player");e&&e.querySelectorAll(".preview-valid, .preview-invalid").forEach((e=>{e.classList.remove("preview-valid","preview-invalid")}))}function q(e,t,n,r,s){A(n,r,t,s).forEach(((t,n)=>{t&&(t.classList.add("ship-placed"),t.dataset.shipName=e)}));const o=document.getElementById("field-container-player");if(!o)return;const l=document.createElement("div");l.className="ship-overlay",l.dataset.shipName=e;const c="X"===s?t:1,d="Y"===s?t:1;l.style.left=r*a+"px",l.style.top=n*a+"px",l.style.width=c*a+"px",l.style.height=d*a+"px";const u=document.createElement("div");u.className="ship-overlay-svg","Y"===s&&(u.classList.add("rotated"),u.style.width=t*a+"px",u.style.height="36px"),u.innerHTML=i(e,t),l.appendChild(u),o.appendChild(l)}function H(e){const t=document.getElementById(`ship-${e}`);t&&(t.classList.add("placed"),t.draggable=!1)}function O(){const e=document.getElementById("start-btn");e&&(e.disabled=null!==T.getCurrentShipToPlace())}function Y(){T.rotateOrientation();const e=T.orientation;document.querySelectorAll(".ship-item:not(.placed) .ship-svg-container").forEach((t=>{"Y"===e?t.classList.add("rotated"):t.classList.remove("rotated")}))}function j(){D(),T.getShipsToPlace().forEach((e=>{let t=!1;for(;!t;){const n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),a=Math.random()<.5?"X":"Y";t=T.placePlayerShip(e,n,r,a),t&&(q(e.name,e.size,n,r,a),H(e.name))}})),c(),O()}function D(){T.resetPlacement();const e=document.getElementById("field-container-player");e&&(e.querySelectorAll(".ship-placed").forEach((e=>{e.classList.remove("ship-placed"),delete e.dataset.shipName})),e.querySelectorAll(".ship-overlay").forEach((e=>e.remove()))),T.getShipsToPlace().forEach((e=>function(e){const t=document.getElementById(`ship-${e}`);t&&(t.classList.remove("placed"),t.draggable=!0)}(e.name))),O()}function X(){T.startBattle()&&S(T)}const F={init:function(e){T=e,function(){const e=document.getElementById("content-left");e.innerHTML="";const t=document.createElement("div");t.className="setup-container";const n=document.createElement("div");n.className="grid-section";const a=document.createElement("h2");a.className="setup-title",a.textContent="Place Your Fleet",n.appendChild(a);const s=r.createMap("player");n.appendChild(s),t.appendChild(n);const o=function(){const e=document.createElement("div");e.className="dock";const t=document.createElement("h3");t.className="dock-title",t.textContent="Fleet Dock",e.appendChild(t);const n=document.createElement("div");return n.className="ship-list",n.id="ship-list",T.getShipsToPlace().forEach((e=>{const t=function(e){const t=document.createElement("div");t.className="ship-item",t.id=`ship-${e.name}`,t.dataset.shipName=e.name,t.dataset.shipSize=e.size,t.draggable=!0;const n=document.createElement("div");n.className="ship-svg-container",n.innerHTML=i(e.name,e.size,T.orientation),t.appendChild(n);const r=document.createElement("span");return r.className="ship-label",r.textContent=`${e.name} (${e.size})`,t.appendChild(r),t.addEventListener("dragstart",N),t.addEventListener("dragend",L),t}(e);n.appendChild(t)})),e.appendChild(n),e.appendChild(function(){const e=document.createElement("div");e.className="setup-buttons";const t=document.createElement("button");t.className="setup-btn",t.id="rotate-btn",t.textContent="Rotate",t.addEventListener("click",Y);const n=document.createElement("button");n.className="setup-btn",n.id="random-btn",n.textContent="Random",n.addEventListener("click",j);const a=document.createElement("button");a.className="setup-btn",a.id="reset-btn",a.textContent="Reset",a.addEventListener("click",D);const s=document.createElement("button");return s.className="setup-btn start-btn",s.id="start-btn",s.textContent="Start Battle",s.disabled=!0,s.addEventListener("click",X),r.appendAll(e,[t,n,a,s]),e}()),e}();t.appendChild(o),e.appendChild(t),function(){const e=document.getElementById("field-container-player");e&&(e.addEventListener("dragover",P),e.addEventListener("dragleave",M),e.addEventListener("drop",z))}()}()}}}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e](n,n.exports,i),n.exports}i.m=a,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,i.d(a,s),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".main.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="battleship:",i.l=(e,t,a,s)=>{if(n[e])n[e].push(t);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",r+a),o.src=e),n[e]=[t];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var a=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var s=i.p+i.u(t),o=new Error;i.l(s,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[s,o,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);l&&l(i)}for(t&&t(n);c<s.length;c++)a=s[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkbattleship=self.webpackChunkbattleship||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const o=class{constructor(e){this.name=e,this.hitCoords=[]}setName(e){this.name=e}attack(e,t,n){this.alreadyHit(e,t)||(this.hitCoords.push([e,t]),n.takeHit(e,t))}randomAttack(e){if(100===this.hitCoords.length)return;let t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());for(;this.alreadyHit(t,n);)t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());this.hitCoords.push([t,n]),e.takeHit(t,n)}alreadyHit(e,t){for(let n=0;n<this.hitCoords.length;n++)if(this.hitCoords[n][0]===e&&this.hitCoords[n][1]===t)return!0;return!1}},l=class{constructor(e,t){this.size=e,this.name=t,this.hits=0,this.sunk=!1}hit(){this.hits+=1,this.hits===this.size&&(this.sunk=!0)}isSunk(){return this.sunk}getName(){return this.name}getSize(){return this.size}},c=10,d=class{constructor(){this.board=new Array(c).fill("x").map((()=>new Array(c).fill("x"))),this.missedShots=new Array(c).fill(!1).map((()=>new Array(c).fill(!1))),this.placeMode="X",this.fleet=[],this.placements=[]}rotate(){"X"===this.placeMode?this.placeMode="Y":this.placeMode="X"}placeShip(e,t,n,r){if(!this.isPlacementPossible(e,t,n,r))return!1;if("Y"===r)for(let r=0;r<e.size;r++)this.board[t+r][n]=e;else for(let r=0;r<e.size;r++)this.board[t][n+r]=e;return this.fleet.push(e),this.placements.push({ship:e,row:t,column:n,orientation:r}),!0}placeShipsRandomly(){if(this.fleet.length>0)return;const e=[],t=new l(5,"Carrier"),n=new l(4,"Battleship"),r=new l(3,"Destroyer"),a=new l(3,"Submarine"),s=new l(2,"PatrolBoat");e.push(t,n,r,a,s);let i=0;for(;i<5;){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),r="XY".split("")[Math.floor(2*Math.random())];this.placeShip(e[i],t,n,r)&&i++}}isPlacementPossible(e,t,n,r){if(t<0||t>9||n<0||n>9)return!1;if("X"===r){if(n+e.size>c)return!1}else if(t+e.size>c)return!1;if("Y"===r){for(let r=0;r<e.size;r++)if("x"!==this.board[t+r][n])return!1}else for(let r=0;r<e.size;r++)if("x"!==this.board[t][n+r])return!1;if("Y"===r){for(let r=0;r<e.size;r++)for(let e=-1;e<=1;e++)for(let a=-1;a<=1;a++)if(!(t+e+r<0||t+e+r>=c||n+a<0||n+a>=c)&&"x"!==this.board[t+e+r][n+a])return!1}else for(let r=0;r<e.size;r++)for(let e=-1;e<=1;e++)for(let a=-1;a<=1;a++)if(!(t+e<0||t+e>=c||n+a+r<0||n+a+r>=c)&&"x"!==this.board[t+e][n+a+r])return!1;return!0}takeHit(e,t){if(e<0||e>=c||t<0||t>=c)return{result:"miss"};const n=this.board[e][t];return"hit"===n||"miss"===n?{result:"already"}:"x"!==n?(n.hit(),this.board[e][t]="hit",{result:"hit",ship:n,sunk:n.isSunk()}):(this.board[e][t]="miss",this.missedShots[e][t]=!0,{result:"miss"})}checkSunk(){for(let e=0;e<this.fleet.length;e++)if(!0===this.fleet[e].sunk)return!0;return!1}isGameOver(){if(0===this.fleet.length)return!1;for(let e=0;e<this.fleet.length;e++)if(!this.fleet[e].isSunk())return!1;return!0}isEmpty(){for(let e=0;e<c;e++)for(let t=0;t<c;t++)if("x"!==this.board[e][t])return!1;return!0}getFreeCells(){let e=100;for(let t=0;t<c;t++)for(let n=0;n<c;n++)"x"!==this.board[t][n]&&(e-=1);return e}},u=class{constructor(){this.player=new o("Captain"),this.computer=new o("computer"),this.playerBoard=new d,this.computerBoard=new d,this.currentTurn="player",this.gamePhase="setup"}getPlayer(){return this.player}getComputer(){return this.computer}setPlayerName(e="Captain"){this.getPlayer().setName(e)}switchTurn(){this.currentTurn="player"===this.currentTurn?"computer":"player"}reset(){this.player=new o("Captain"),this.computer=new o("computer"),this.playerBoard=new d,this.computerBoard=new d,this.currentTurn="player",this.gamePhase="setup"}},h=[{name:"Carrier",size:5},{name:"Battleship",size:4},{name:"Destroyer",size:3},{name:"Submarine",size:3},{name:"PatrolBoat",size:2}];var p=i(954);const m=new class{constructor(){this.game=new u,this.phase="setup",this.orientation="X",this.placedShipsCount=0}getShipsToPlace(){return h.map((e=>({...e})))}getCurrentShipToPlace(){return this.placedShipsCount>=h.length?null:{...h[this.placedShipsCount]}}rotateOrientation(){return this.orientation="X"===this.orientation?"Y":"X",this.orientation}placePlayerShip(e,t,n,r){if("setup"!==this.phase)return!1;const a=new l(e.size,e.name),s=this.game.playerBoard.placeShip(a,t,n,r);return s&&this.placedShipsCount++,s}placeComputerShips(){this.game.computerBoard.placeShipsRandomly()}startBattle(){return!(this.placedShipsCount<h.length||(this.placeComputerShips(),this.phase="battle",this.game.gamePhase="battle",this.game.currentTurn="player",0))}resetPlacement(){this.game.player.name,this.game.playerBoard=new this.game.playerBoard.constructor,this.placedShipsCount=0,this.orientation="X"}playerAttack(e,t){if("battle"!==this.phase||"player"!==this.game.currentTurn)return null;if(this.game.player.alreadyHit(e,t))return{result:"already"};this.game.player.hitCoords.push([e,t]);const n=this.game.computerBoard.takeHit(e,t);return this.game.switchTurn(),n}computerTurn(){if("battle"!==this.phase||"computer"!==this.game.currentTurn)return null;let e,t;do{e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random())}while(this.game.computer.alreadyHit(e,t));this.game.computer.hitCoords.push([e,t]);const n=this.game.playerBoard.takeHit(e,t);return this.game.switchTurn(),{row:e,col:t,...n}}getSunkShipPositions(e){return e.placements.filter((e=>e.ship.isSunk())).map((e=>({name:e.ship.name,size:e.ship.size,row:e.row,col:e.column,orientation:e.orientation})))}checkGameOver(){return this.game.computerBoard.isGameOver()?"player":this.game.playerBoard.isGameOver()?"computer":null}resetGame(){this.game.reset(),this.phase="setup",this.orientation="X",this.placedShipsCount=0}},f=new class{constructor(){this.audio=null,this.muted=!1}async background(){const e=await i.e(527).then(i.t.bind(i,527,17));this.audio=new Audio(e.default),this.audio.loop=!0,this.audio.play()}BackgroundOnClick(){document.addEventListener("click",(()=>this.background()),{once:!0})}toggle(){if(this.audio)return this.muted=!this.muted,this.audio.muted=this.muted,this.muted}isMuted(){return this.muted}},y=new class{constructor(){}initPlayButton(){document.getElementById("play-button").addEventListener("click",(e=>{e.preventDefault(),this.onPlay()})),document.getElementById("name").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),this.onPlay())}))}onPlay(){const e=document.getElementById("name").value.toString().trim();e&&m.game.setPlayerName(`Captain ${e}`),document.getElementById("welcome-screen").classList.add("hidden"),p.default.init(m)}};f.BackgroundOnClick(),y.initPlayButton(),function(){const e=document.createElement("button");e.id="mute-btn",e.className="mute-btn",e.textContent="ðŸ”Š",e.addEventListener("click",(t=>{t.stopPropagation();const n=f.toggle();e.textContent=n?"ðŸ”‡":"ðŸ”Š"})),document.body.appendChild(e)}()})();