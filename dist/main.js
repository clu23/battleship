(()=>{"use strict";var e,t,n,r,a={212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});const r={create:function(e,t){e||console.log("missing type");const n=document.createElement(e);for(const[e,r]of Object.entries(t))n[e]=r;return n},appendAll:function(e,t){t.forEach((t=>e.appendChild(t)))},deleteAppContent:function(){document.getElementById("app").replaceChildren("")},getHeader:function(e){const t=document.createElement("header");t.classList.add("header",`${e}`);const n=document.createElement("h1");return n.textContent="Battleship",t.appendChild(n),t},createMap:function(e){const t=document.createElement("div");t.id=`board-${e}`,t.classList.add("board",e);const n=document.createElement("div");return n.className="board-corner",t.appendChild(n),t.appendChild(function(){const e=document.createElement("div");return e.classList="letter-container",["A","B","C","D","E","F","G","H","I","J"].forEach((t=>{const n=document.createElement("div");n.className="letter",n.textContent=t,e.appendChild(n)})),e}()),t.appendChild(function(){const e=document.createElement("div");return e.id="number-container",e.classList="number-container",[1,2,3,4,5,6,7,8,9,10].forEach((t=>{const n=document.createElement("div");n.classList="number",n.textContent=t,e.appendChild(n)})),e}()),t.appendChild(function(e){const t=document.createElement("div");t.id=`field-container-${e}`,t.className="field-container";for(let e=0;e<10;e+=1)for(let n=0;n<10;n+=1){const r=document.createElement("div");r.className="field",r.dataset.row=e,r.dataset.col=n,t.appendChild(r)}return t}(e)),t},getCoordinatesFromIndex:function(e){return[parseInt(e/10,10),e%10]},getIndexFromCoordinates:function(e,t){return 10*e+t},roundNearestTenExceptZero:function(e){for(;e%10!=0;)e+=1;return e}},a=36,i={Carrier:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull --\x3e\n            <rect x="2" y="4" width="${e-4}" height="${t-8}" rx="6" ry="6" fill="#4a4a4a" stroke="#333" stroke-width="1.5"/>\n            \x3c!-- Flight deck --\x3e\n            <rect x="6" y="8" width="${e-12}" height="${t-16}" rx="3" fill="#5a5a5a"/>\n            \x3c!-- Deck lines --\x3e\n            <line x1="12" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#777" stroke-width="0.8" stroke-dasharray="4,3"/>\n            <line x1="12" y1="${t/2-5}" x2="${e-12}" y2="${t/2-5}" stroke="#666" stroke-width="0.5" stroke-dasharray="3,4"/>\n            <line x1="12" y1="${t/2+5}" x2="${e-12}" y2="${t/2+5}" stroke="#666" stroke-width="0.5" stroke-dasharray="3,4"/>\n            \x3c!-- Island (control tower) --\x3e\n            <rect x="${e-50}" y="6" width="16" height="10" rx="2" fill="#3a3a3a" stroke="#222" stroke-width="1"/>\n            <rect x="${e-48}" y="3" width="4" height="3" rx="1" fill="#333"/>\n            \x3c!-- Bow arrow --\x3e\n            <polygon points="${e-8},${t/2} ${e-16},${t/2-4} ${e-16},${t/2+4}" fill="#666"/>\n            \x3c!-- Aircraft silhouettes on deck --\x3e\n            <g fill="#6a6a6a" opacity="0.6">\n                <rect x="14" y="${t/2-6}" width="10" height="4" rx="1"/>\n                <rect x="30" y="${t/2+2}" width="10" height="4" rx="1"/>\n                <rect x="50" y="${t/2-6}" width="10" height="4" rx="1"/>\n                <rect x="70" y="${t/2+2}" width="10" height="4" rx="1"/>\n            </g>\n        </svg>`,Battleship:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull --\x3e\n            <path d="M 8,${t/2} Q 2,${t/2} 4,${t/2-8} L 10,${t/2-10} L ${e-10},${t/2-10} Q ${e-2},${t/2-8} ${e-2},${t/2} Q ${e-2},${t/2+8} ${e-10},${t/2+10} L 10,${t/2+10} Q 2,${t/2+8} 4,${t/2+8} Z" fill="#5a6a7a" stroke="#3a4a5a" stroke-width="1.5"/>\n            \x3c!-- Superstructure --\x3e\n            <rect x="${e/2-18}" y="${t/2-7}" width="36" height="14" rx="3" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            \x3c!-- Bridge --\x3e\n            <rect x="${e/2-8}" y="${t/2-9}" width="16" height="18" rx="2" fill="#3a4a5a"/>\n            \x3c!-- Forward turrets --\x3e\n            <circle cx="24" cy="${t/2}" r="6" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="24" y1="${t/2}" x2="12" y2="${t/2}" stroke="#3a4a5a" stroke-width="2.5" stroke-linecap="round"/>\n            <circle cx="${e/2-26}" cy="${t/2}" r="5" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="${e/2-26}" y1="${t/2}" x2="${e/2-38}" y2="${t/2}" stroke="#3a4a5a" stroke-width="2" stroke-linecap="round"/>\n            \x3c!-- Aft turrets --\x3e\n            <circle cx="${e-24}" cy="${t/2}" r="6" fill="#4a5a6a" stroke="#3a4a5a" stroke-width="1"/>\n            <line x1="${e-24}" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#3a4a5a" stroke-width="2.5" stroke-linecap="round"/>\n            \x3c!-- Bow --\x3e\n            <polygon points="4,${t/2} 10,${t/2-6} 10,${t/2+6}" fill="#5a6a7a" stroke="#3a4a5a" stroke-width="0.5"/>\n        </svg>`,Destroyer:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - sleek --\x3e\n            <path d="M 4,${t/2} L 10,${t/2-8} L ${e-8},${t/2-8} Q ${e-2},${t/2-4} ${e-2},${t/2} Q ${e-2},${t/2+4} ${e-8},${t/2+8} L 10,${t/2+8} Z" fill="#5a6b4a" stroke="#3a4b2a" stroke-width="1.5"/>\n            \x3c!-- Superstructure --\x3e\n            <rect x="${e/2-12}" y="${t/2-5}" width="24" height="10" rx="2" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            \x3c!-- Forward turret --\x3e\n            <circle cx="22" cy="${t/2}" r="5" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            <line x1="22" y1="${t/2}" x2="10" y2="${t/2}" stroke="#3a4b2a" stroke-width="2" stroke-linecap="round"/>\n            \x3c!-- Aft turret --\x3e\n            <circle cx="${e-22}" cy="${t/2}" r="4" fill="#4a5b3a" stroke="#3a4b2a" stroke-width="1"/>\n            <line x1="${e-22}" y1="${t/2}" x2="${e-12}" y2="${t/2}" stroke="#3a4b2a" stroke-width="1.5" stroke-linecap="round"/>\n            \x3c!-- Bow point --\x3e\n            <polygon points="4,${t/2} 10,${t/2-5} 10,${t/2+5}" fill="#5a6b4a"/>\n        </svg>`,Submarine:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - rounded --\x3e\n            <ellipse cx="${e/2}" cy="${t/2}" rx="${e/2-3}" ry="${t/2-6}" fill="#2a2a2a" stroke="#1a1a1a" stroke-width="1.5"/>\n            \x3c!-- Conning tower --\x3e\n            <rect x="${e/2-10}" y="${t/2-8}" width="20" height="16" rx="4" fill="#333" stroke="#1a1a1a" stroke-width="1"/>\n            \x3c!-- Periscope --\x3e\n            <line x1="${e/2+4}" y1="${t/2-8}" x2="${e/2+4}" y2="${t/2-14}" stroke="#444" stroke-width="2" stroke-linecap="round"/>\n            <circle cx="${e/2+4}" cy="${t/2-15}" r="2" fill="#555" stroke="#333" stroke-width="0.5"/>\n            \x3c!-- Bow --\x3e\n            <ellipse cx="8" cy="${t/2}" rx="5" ry="${t/2-8}" fill="#252525"/>\n            \x3c!-- Stern planes --\x3e\n            <line x1="${e-8}" y1="${t/2-10}" x2="${e-8}" y2="${t/2+10}" stroke="#333" stroke-width="2"/>\n            \x3c!-- Propeller hint --\x3e\n            <circle cx="${e-5}" cy="${t/2}" r="3" fill="none" stroke="#444" stroke-width="1"/>\n            \x3c!-- Hull details --\x3e\n            <line x1="18" y1="${t/2}" x2="${e/2-12}" y2="${t/2}" stroke="#333" stroke-width="0.8"/>\n            <line x1="${e/2+12}" y1="${t/2}" x2="${e-18}" y2="${t/2}" stroke="#333" stroke-width="0.8"/>\n        </svg>`,PatrolBoat:(e,t)=>`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}" width="${e}" height="${t}">\n            \x3c!-- Hull - small and fast --\x3e\n            <path d="M 4,${t/2} L 8,${t/2-7} L ${e-6},${t/2-7} Q ${e-2},${t/2-3} ${e-2},${t/2} Q ${e-2},${t/2+3} ${e-6},${t/2+7} L 8,${t/2+7} Z" fill="#d4cfc4" stroke="#aaa48e" stroke-width="1.5"/>\n            \x3c!-- Cabin --\x3e\n            <rect x="${e/2-8}" y="${t/2-5}" width="16" height="10" rx="2" fill="#c4bfb4" stroke="#aaa48e" stroke-width="1"/>\n            \x3c!-- Small gun --\x3e\n            <circle cx="16" cy="${t/2}" r="3" fill="#b4afa4" stroke="#aaa48e" stroke-width="0.8"/>\n            <line x1="16" y1="${t/2}" x2="8" y2="${t/2}" stroke="#aaa48e" stroke-width="1.5" stroke-linecap="round"/>\n            \x3c!-- Bow --\x3e\n            <polygon points="4,${t/2} 8,${t/2-4} 8,${t/2+4}" fill="#d4cfc4"/>\n            \x3c!-- Wake lines --\x3e\n            <line x1="${e-4}" y1="${t/2-4}" x2="${e+2}" y2="${t/2-6}" stroke="#aaa48e" stroke-width="0.5" opacity="0.5"/>\n            <line x1="${e-4}" y1="${t/2+4}" x2="${e+2}" y2="${t/2+6}" stroke="#aaa48e" stroke-width="0.5" opacity="0.5"/>\n        </svg>`};function o(e,t,n){const r=i[e];return r?r(t*a,36):""}let s=null;function l(){return s||(s=new(window.AudioContext||window.webkitAudioContext)),s}function c(){const e=l(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="sine",t.frequency.setValueAtTime(440,e.currentTime),t.frequency.exponentialRampToValueAtTime(880,e.currentTime+.1),n.gain.setValueAtTime(.15,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),t.start(e.currentTime),t.stop(e.currentTime+.15)}let d=null,u=!1;function h(e){const t=e.target.closest(".field");if(!t||u)return;if("battle"!==d.phase||"player"!==d.game.currentTurn)return;const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10),a=d.playerAttack(n,r);if(!a||"already"===a.result)return;p(t,a);const i=d.checkGameOver();if(i)return m("player"===i?"Victory! You sank the entire enemy fleet!":"Defeat! Your fleet has been sunk!"),void f(i);"hit"===a.result&&a.sunk?m(`You sank their ${a.ship.name}!`):"hit"===a.result?m("Hit!"):m("Miss..."),u=!0,setTimeout((()=>{!function(){const e=d.computerTurn();if(!e)return;const t=document.getElementById("field-container-player");if(!t)return;const n=t.querySelector(`.field[data-row="${e.row}"][data-col="${e.col}"]`);n&&p(n,e);const r=d.checkGameOver();if(r)return m("player"===r?"Victory! You sank the entire enemy fleet!":"Defeat! Your fleet has been sunk!"),void f(r);"hit"===e.result&&e.sunk?m(`Enemy sank your ${e.ship.name}! Your turn.`):"hit"===e.result?m("Enemy hit your ship! Your turn."):m("Enemy missed. Your turn!")}(),u=!1}),500)}function p(e,t){e.classList.remove("ship-placed"),"hit"===t.result?e.classList.add("cell-hit"):e.classList.add("cell-miss")}function m(e){const t=document.getElementById("message-bar");t&&(t.textContent=e)}function f(e){u=!0;const t=document.createElement("div");t.className="gameover-overlay";const r=document.createElement("div");r.className="gameover-box";const a=document.createElement("h2");a.className="gameover-title",a.textContent="player"===e?"Victory!":"Defeat!";const i=document.createElement("p");i.className="gameover-subtitle",i.textContent="player"===e?"You destroyed the entire enemy fleet.":"Your fleet has been destroyed.";const o=document.createElement("button");o.className="setup-btn",o.textContent="Play Again",o.addEventListener("click",(async()=>{t.remove(),d.resetGame(),u=!1,document.getElementById("content-right").innerHTML="",(await Promise.resolve().then(n.bind(n,212))).default.init(d)})),r.appendChild(a),r.appendChild(i),r.appendChild(o),t.appendChild(r),document.body.appendChild(t)}const y=function(e){d=e,function(){const e=document.getElementById("content-left");e.innerHTML="";const t=document.createElement("div");t.className="battle-section";const n=document.createElement("h2");n.className="board-title",n.textContent="Your Fleet",t.appendChild(n);const a=r.createMap("player");t.appendChild(a);const i=document.createElement("div");i.className="message-bar",i.id="message-bar",i.textContent="Your turn â€” fire at the enemy grid!",t.appendChild(i),e.appendChild(t),function(){const e=d.game.playerBoard.board,t=document.getElementById("field-container-player");if(t)for(let n=0;n<10;n++)for(let r=0;r<10;r++)if("x"!==e[n][r]&&"hit"!==e[n][r]&&"miss"!==e[n][r]){const e=t.querySelector(`.field[data-row="${n}"][data-col="${r}"]`);e&&e.classList.add("ship-placed")}}();const o=document.getElementById("content-right");o.innerHTML="";const s=document.createElement("div");s.className="battle-section";const l=document.createElement("h2");l.className="board-title",l.textContent="Enemy Waters",s.appendChild(l);const c=r.createMap("computer");s.appendChild(c),o.appendChild(s),function(){const e=document.getElementById("field-container-computer");e&&e.addEventListener("click",h)}()}()};let g=null,x=null;function $(e){const t=e.currentTarget;x={name:t.dataset.shipName,size:parseInt(t.dataset.shipSize,10)},t.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.dataset.shipName);const n=t.querySelector("svg");if(n){const t=n.cloneNode(!0);t.style.opacity="0.8";const r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.appendChild(t),document.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0),setTimeout((()=>r.remove()),0)}}function w(e){e.currentTarget.classList.remove("dragging"),x=null,C()}function k(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const t=e.target.closest(".field");if(!t||!x)return;C();const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10),{name:a,size:i}=x,o=g.orientation,s=g.game.playerBoard.isPlacementPossible({size:i},n,r,o),l=E(n,r,i,o),c=s?"preview-valid":"preview-invalid";l.forEach((e=>{e&&e.classList.add(c)}))}function v(e){const t=document.getElementById("field-container-player");t&&!t.contains(e.relatedTarget)&&C()}function b(e){e.preventDefault(),C();const t=e.target.closest(".field");if(!t||!x)return;const n=parseInt(t.dataset.row,10),r=parseInt(t.dataset.col,10),{name:a,size:i}=x,o=g.orientation;g.placePlayerShip({name:a,size:i},n,r,o)?(c(),T(a,i,n,r,o),B(a),S()):function(){const e=l(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="square",t.frequency.setValueAtTime(150,e.currentTime),t.frequency.exponentialRampToValueAtTime(80,e.currentTime+.2),n.gain.setValueAtTime(.12,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.25),t.start(e.currentTime),t.stop(e.currentTime+.25)}(),x=null}function E(e,t,n,r){const a=document.getElementById("field-container-player");if(!a)return[];const i=[];for(let o=0;o<n;o++){const n="Y"===r?e+o:e,s="X"===r?t+o:t,l=a.querySelector(`.field[data-row="${n}"][data-col="${s}"]`);i.push(l)}return i}function C(){const e=document.getElementById("field-container-player");e&&e.querySelectorAll(".preview-valid, .preview-invalid").forEach((e=>{e.classList.remove("preview-valid","preview-invalid")}))}function T(e,t,n,r,i){E(n,r,t,i).forEach(((t,n)=>{t&&(t.classList.add("ship-placed"),t.dataset.shipName=e)}));const s=document.getElementById("field-container-player");if(!s)return;const l=document.createElement("div");l.className="ship-overlay",l.dataset.shipName=e;const c="X"===i?t:1,d="Y"===i?t:1;l.style.left=r*a+"px",l.style.top=n*a+"px",l.style.width=c*a+"px",l.style.height=d*a+"px";const u=document.createElement("div");u.className="ship-overlay-svg","Y"===i&&(u.classList.add("rotated"),u.style.width=t*a+"px",u.style.height="36px"),u.innerHTML=o(e,t),l.appendChild(u),s.appendChild(l)}function B(e){const t=document.getElementById(`ship-${e}`);t&&(t.classList.add("placed"),t.draggable=!1)}function S(){const e=document.getElementById("start-btn");e&&(e.disabled=null!==g.getCurrentShipToPlace())}function L(){g.rotateOrientation();const e=g.orientation;document.querySelectorAll(".ship-item:not(.placed) .ship-svg-container").forEach((t=>{"Y"===e?t.classList.add("rotated"):t.classList.remove("rotated")}))}function N(){P(),g.getShipsToPlace().forEach((e=>{let t=!1;for(;!t;){const n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random()),a=Math.random()<.5?"X":"Y";t=g.placePlayerShip(e,n,r,a),t&&(T(e.name,e.size,n,r,a),B(e.name))}})),c(),S()}function P(){g.resetPlacement();const e=document.getElementById("field-container-player");e&&(e.querySelectorAll(".ship-placed").forEach((e=>{e.classList.remove("ship-placed"),delete e.dataset.shipName})),e.querySelectorAll(".ship-overlay").forEach((e=>e.remove()))),g.getShipsToPlace().forEach((e=>function(e){const t=document.getElementById(`ship-${e}`);t&&(t.classList.remove("placed"),t.draggable=!0)}(e.name))),S()}function M(){g.startBattle()&&y(g)}const A={init:function(e){g=e,function(){const e=document.getElementById("content-left");e.innerHTML="";const t=document.createElement("div");t.className="setup-container";const n=document.createElement("div");n.className="grid-section";const a=document.createElement("h2");a.className="setup-title",a.textContent="Place Your Fleet",n.appendChild(a);const i=r.createMap("player");n.appendChild(i),t.appendChild(n);const s=function(){const e=document.createElement("div");e.className="dock";const t=document.createElement("h3");t.className="dock-title",t.textContent="Fleet Dock",e.appendChild(t);const n=document.createElement("div");return n.className="ship-list",n.id="ship-list",g.getShipsToPlace().forEach((e=>{const t=function(e){const t=document.createElement("div");t.className="ship-item",t.id=`ship-${e.name}`,t.dataset.shipName=e.name,t.dataset.shipSize=e.size,t.draggable=!0;const n=document.createElement("div");n.className="ship-svg-container",n.innerHTML=o(e.name,e.size,g.orientation),t.appendChild(n);const r=document.createElement("span");return r.className="ship-label",r.textContent=`${e.name} (${e.size})`,t.appendChild(r),t.addEventListener("dragstart",$),t.addEventListener("dragend",w),t}(e);n.appendChild(t)})),e.appendChild(n),e.appendChild(function(){const e=document.createElement("div");e.className="setup-buttons";const t=document.createElement("button");t.className="setup-btn",t.id="rotate-btn",t.textContent="Rotate",t.addEventListener("click",L);const n=document.createElement("button");n.className="setup-btn",n.id="random-btn",n.textContent="Random",n.addEventListener("click",N);const a=document.createElement("button");a.className="setup-btn",a.id="reset-btn",a.textContent="Reset",a.addEventListener("click",P);const i=document.createElement("button");return i.className="setup-btn start-btn",i.id="start-btn",i.textContent="Start Battle",i.disabled=!0,i.addEventListener("click",M),r.appendAll(e,[t,n,a,i]),e}()),e}();t.appendChild(s),e.appendChild(t),function(){const e=document.getElementById("field-container-player");e&&(e.addEventListener("dragover",k),e.addEventListener("dragleave",v),e.addEventListener("drop",b))}()}()}}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return a[e](n,n.exports,o),n.exports}o.m=a,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);o.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>e+".main.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="battleship:",o.l=(e,t,a,i)=>{if(n[e])n[e].push(t);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+a){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",r+a),s.src=e),n[e]=[t];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var a=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={792:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var i=o.p+o.u(t),s=new Error;o.l(i,(n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);l&&l(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkbattleship=self.webpackChunkbattleship||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const s=class{constructor(e){this.name=e,this.hitCoords=[]}setName(e){this.name=e}attack(e,t,n){this.alreadyHit(e,t)||(this.hitCoords.push([e,t]),n.takeHit(e,t))}randomAttack(e){if(100===this.hitCoords.length)return;let t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());for(;this.alreadyHit(t,n);)t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());this.hitCoords.push([t,n]),e.takeHit(t,n)}alreadyHit(e,t){for(let n=0;n<this.hitCoords.length;n++)if(this.hitCoords[n][0]===e&&this.hitCoords[n][1]===t)return!0;return!1}},l=class{constructor(e,t){this.size=e,this.name=t,this.hits=0,this.sunk=!1}hit(){this.hits+=1,this.hits===this.size&&(this.sunk=!0)}isSunk(){return this.sunk}getName(){return this.name}getSize(){return this.size}},c=10,d=class{constructor(){this.board=new Array(c).fill("x").map((()=>new Array(c).fill("x"))),this.missedShots=new Array(c).fill(!1).map((()=>new Array(c).fill(!1))),this.placeMode="X",this.fleet=[]}rotate(){"X"===this.placeMode?this.placeMode="Y":this.placeMode="X"}placeShip(e,t,n,r){if(!this.isPlacementPossible(e,t,n,r))return!1;if("Y"===r)for(let r=0;r<e.size;r++)this.board[t+r][n]=e;else for(let r=0;r<e.size;r++)this.board[t][n+r]=e;return this.fleet.push(e),!0}placeShipsRandomly(){if(this.fleet.length>0)return;const e=[],t=new l(5,"carrier"),n=new l(4,"battleship"),r=new l(3,"destroyer"),a=new l(3,"submarine"),i=new l(2,"patrolBoat");e.push(t,n,r,a,i);let o=0;for(;o<5;){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),r="XY".split("")[Math.floor(2*Math.random())];this.placeShip(e[o],t,n,r)&&o++}}isPlacementPossible(e,t,n,r){if(t<0||t>9||n<0||n>9)return!1;if("X"===r){if(n+e.size>c)return!1}else if(t+e.size>c)return!1;if("Y"===r){for(let r=0;r<e.size;r++)if("x"!==this.board[t+r][n])return!1}else for(let r=0;r<e.size;r++)if("x"!==this.board[t][n+r])return!1;if("Y"===r){for(let r=0;r<e.size;r++)for(let e=-1;e<=1;e++)for(let a=-1;a<=1;a++)if(!(t+e+r<0||t+e+r>=c||n+a<0||n+a>=c)&&"x"!==this.board[t+e+r][n+a])return!1}else for(let r=0;r<e.size;r++)for(let e=-1;e<=1;e++)for(let a=-1;a<=1;a++)if(!(t+e<0||t+e>=c||n+a+r<0||n+a+r>=c)&&"x"!==this.board[t+e][n+a+r])return!1;return!0}takeHit(e,t){if(e<0||e>=c||t<0||t>=c)return{result:"miss"};const n=this.board[e][t];return"hit"===n||"miss"===n?{result:"already"}:"x"!==n?(n.hit(),this.board[e][t]="hit",{result:"hit",ship:n,sunk:n.isSunk()}):(this.board[e][t]="miss",this.missedShots[e][t]=!0,{result:"miss"})}checkSunk(){for(let e=0;e<this.fleet.length;e++)if(!0===this.fleet[e].sunk)return!0;return!1}isGameOver(){if(0===this.fleet.length)return!1;for(let e=0;e<this.fleet.length;e++)if(!this.fleet[e].isSunk())return!1;return!0}isEmpty(){for(let e=0;e<c;e++)for(let t=0;t<c;t++)if("x"!==this.board[e][t])return!1;return!0}getFreeCells(){let e=100;for(let t=0;t<c;t++)for(let n=0;n<c;n++)"x"!==this.board[t][n]&&(e-=1);return e}},u=class{constructor(){this.player=new s("Captain"),this.computer=new s("computer"),this.playerBoard=new d,this.computerBoard=new d,this.currentTurn="player",this.gamePhase="setup"}getPlayer(){return this.player}getComputer(){return this.computer}setPlayerName(e="Captain"){this.getPlayer().setName(e)}switchTurn(){this.currentTurn="player"===this.currentTurn?"computer":"player"}reset(){this.player=new s("Captain"),this.computer=new s("computer"),this.playerBoard=new d,this.computerBoard=new d,this.currentTurn="player",this.gamePhase="setup"}},h=[{name:"Carrier",size:5},{name:"Battleship",size:4},{name:"Destroyer",size:3},{name:"Submarine",size:3},{name:"PatrolBoat",size:2}];var p=o(212);const m=new class{constructor(){this.game=new u,this.phase="setup",this.orientation="X",this.placedShipsCount=0}getShipsToPlace(){return h.map((e=>({...e})))}getCurrentShipToPlace(){return this.placedShipsCount>=h.length?null:{...h[this.placedShipsCount]}}rotateOrientation(){return this.orientation="X"===this.orientation?"Y":"X",this.orientation}placePlayerShip(e,t,n,r){if("setup"!==this.phase)return!1;const a=new l(e.size,e.name),i=this.game.playerBoard.placeShip(a,t,n,r);return i&&this.placedShipsCount++,i}placeComputerShips(){this.game.computerBoard.placeShipsRandomly()}startBattle(){return!(this.placedShipsCount<h.length||(this.placeComputerShips(),this.phase="battle",this.game.gamePhase="battle",this.game.currentTurn="player",0))}resetPlacement(){this.game.player.name,this.game.playerBoard=new this.game.playerBoard.constructor,this.placedShipsCount=0,this.orientation="X"}playerAttack(e,t){if("battle"!==this.phase||"player"!==this.game.currentTurn)return null;if(this.game.player.alreadyHit(e,t))return{result:"already"};this.game.player.hitCoords.push([e,t]);const n=this.game.computerBoard.takeHit(e,t);return this.game.switchTurn(),n}computerTurn(){if("battle"!==this.phase||"computer"!==this.game.currentTurn)return null;let e,t;do{e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random())}while(this.game.computer.alreadyHit(e,t));this.game.computer.hitCoords.push([e,t]);const n=this.game.playerBoard.takeHit(e,t);return this.game.switchTurn(),{row:e,col:t,...n}}checkGameOver(){return this.game.computerBoard.isGameOver()?"player":this.game.playerBoard.isGameOver()?"computer":null}resetGame(){this.game.reset(),this.phase="setup",this.orientation="X",this.placedShipsCount=0}},f=new class{constructor(){this.audio=null,this.muted=!1}async background(){const e=await o.e(527).then(o.t.bind(o,527,17));this.audio=new Audio(e.default),this.audio.loop=!0,this.audio.play()}BackgroundOnClick(){document.addEventListener("click",(()=>this.background()),{once:!0})}toggle(){if(this.audio)return this.muted=!this.muted,this.audio.muted=this.muted,this.muted}isMuted(){return this.muted}},y=new class{constructor(){}initPlayButton(){document.getElementById("play-button").addEventListener("click",(e=>{e.preventDefault(),this.onPlay()})),document.getElementById("name").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),this.onPlay())}))}onPlay(){const e=document.getElementById("name").value.toString().trim();e&&m.game.setPlayerName(`Captain ${e}`),document.getElementById("welcome-screen").classList.add("hidden"),p.default.init(m)}};f.BackgroundOnClick(),y.initPlayButton(),function(){const e=document.createElement("button");e.id="mute-btn",e.className="mute-btn",e.textContent="ðŸ”Š",e.addEventListener("click",(t=>{t.stopPropagation();const n=f.toggle();e.textContent=n?"ðŸ”‡":"ðŸ”Š"})),document.body.appendChild(e)}()})();